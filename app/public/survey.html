<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <div class="row">
            <div class="col-lg-12">
                <!-- Reservation Page -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Personal Data</h4>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="friend-name">Name</label>
                                <input type="text" class="form-control" id="friend-name">
                            </div>
                            <div class="form-group">
                                <label for="friend-email">Email</label>
                                <input type="text" class="form-control" id="friend-email">
                            </div>
                            <div class="form-group">
                                <label for="friend-user">User Name</label>
                                <input type="text" class="form-control" id="friend-user">
                            </div>
                            <div class="form-group">
                                <label for="friend-phone">Phone Number</label>
                                <input type="text" class="form-control" id="friend-number">
                            </div>
                            <div class="form-group">
                                <label for="friend-image">Image url (must be a full link to an image file)</label>
                                <input type="text" class="form-control" id="friend-image">
                            </div>
                            <div class="form-group">
                                <label for="friend-bio">Short Bio</label>
                                <input type="text" class="form-control" id="friend-bio">
                            </div>
                            <h4>Are you male or female</h4>
                            <select data-placeholder="" class="chosen-select" id="gender">
                                <option value=""></option>
                                <option value="male">male</option>
                                <option value="female">female</option>
                            </select>
                            <br>
                            <br>
                            <!--   <button type="submit" class="btn btn-primary takeQuiz">Submit</button> -->
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <h4>What is an acceptable age range for your match</h4>
        <select data-placeholder="" class="chosen-select" id="ageRange">
            <option value=""></option>
            <option value="younger">18 to 29</option>
            <option value="mid">30 to 39</option>
            <option value="older">40 to 49</option>
            <option value="all"> no preference</option>
        </select>
        <h3><strong>Question 1</strong></h3>
        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="morals" id="q1">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 2</strong></h3>
        <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="superficiality" id="q2">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 3</strong></h3>
        <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="interests" id="q3">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 4</strong></h3>
        <h4>You rarely do something just out of sheer curiosity.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="leisure" id="q4">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 5</strong></h3>
        <h4>People can rarely upset you.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="superficiality" id="q5">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 6</strong></h3>
        <h4>It is often difficult for you to relate to other people’s feelings.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="morals" id="q6">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 7</strong></h3>
        <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="interests" id="q7">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 8</strong></h3>
        <h4>You rarely get carried away by fantasies and ideas.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="leisure" id="q8">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 9</strong></h3>
        <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="morals" id="q9">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 10</strong></h3>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="leisure" id="q10">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 11</strong></h3>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="superficiality" id="q11">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <h3><strong>Question 12</strong></h3>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <select data-placeholder="" class="chosen-select" data-cat="interests" id="q12">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <br>
        <h2> Preferences </h2>
        <h4>Are there any qualities and/or activities that you wish you and your match shared? </h4>
        <select data-placeholder="" class="chosen-select" id="highGravity">
            <option value=""></option>
            <option value="leisure">relaxation and leisure</option>
            <option value="morals">morality</option>
            <option value="superficiality">superficiality</option>
            <option value="interests">interests</option>
        </select>
        <h4>Are there any qualities and/or activities that are not very important to you in the matching process? </h4>
        <select data-placeholder="" class="chosen-select" id="lowGravity">
            <option value=""></option>
            <option value="leisure">relaxation and leisure</option>
            <option value="morals">morality</option>
            <option value="superficiality">superficiality</option>
            <option value="interests">interests</option>
        </select>
        <br>
        <br>
        <!-- Submit Button -->
        <button class="submitSurvey">Submit</button>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/results">Submit2</a></p>
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/afhaque/friendfinder">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
    <!-- Modal -->
    <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="matchName"></h2>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    var nameArray = [];


    // Here we grab the form elements


    // This line is the magic. It"s very similar to the standard ajax function we used.
    // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
    // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
    // depending on if a tables is available or not.


    // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
    $(".submitSurvey").on("click", function(event) {
        event.preventDefault();
        var w = [];
        var x = [];
        var y = [];
        var z = [];

        var nameArray = [];
        for (var i = 1; i < 13; i++) {
            var dataCat = $("#q" + i).attr("data-cat");
            var tempVal = $("#q" + i).val();
            tempValNum = parseInt(tempVal);
            switch (dataCat) {
                case "leisure":
                    w.push(tempValNum);
                    break;
                case "morals":
                    x.push(tempValNum);
                    break;
                case "interests":
                    y.push(tempValNum);
                    break;
                case "superficiality":
                    z.push(tempValNum);
                    break;
            }
        }

        var newFriend = {
            friendName: $("#friend-name").val().trim(),
            friendEmail: $("#friend-email").val().trim(),
            friendUserName: $("#friend-user").val().trim(),
            phoneNumber: $("#friend-number").val().trim(),
            imageUrl: $("#friend-image").val().trim(),
            shortBio: $("#friend-bio").val().trim(),
            gender: $("#gender").val(),
            surveyResults: [{
                raw: w,
                average: 0,
                type: "leisure"
            }, {
                raw: x,
                average: 0,
                type: "morals"
            }, {
                raw: y,
                average: 0,
                type: "interests"
            }, {
                raw: z,
                average: 0,
                type: "superficiality"
            }],
        };
        setTimeout(postIt, 500);

        function postIt() {
            console.log(newFriend);
            $.ajax({
                    url: "/api/friends",
                    data: newFriend,
                    method: "POST"
                })
                .done(function(data) {
                    // $.post("/api/friends", newFriend,
                    //   function(data) {
                    console.log(data[0]);

                    // Clear the form when submitting
                    $("#friend-name").val("");
                    $("#friend-email").val("");
                    $("#friend-user").val("");
                    $("#friend-number").val("");
                    $("#friend-image").val("");
                    $("#friend-bio").val("");
                    $("#gender").val("");
                    // var url = "/results";
                    // $(location).attr('href', url);

                });
        }
    });
    </script>
</body>

</html>
