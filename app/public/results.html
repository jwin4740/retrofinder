<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tables Page</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <style>
    .matchResult {
        border: solid 2px black;
        height: 200px;
        width: 200px;
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <!-- Current Tables in Use -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">You</h4>
                    </div>
                    <div class="panel-body" id="you">
                        <img class="matchResult" id="yourImage" alt="https://www.ucl.ac.uk/prospective-students/graduate/images/test/placeholder-200x200">
                        <h3> name </h3>
                        <p> about me information and data that describes why the match is a good match</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <!-- Current Tables in Use -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Your match</h4>
                    </div>
                    <div class="panel-body">
                        <img class="matchResult" id="yourMatch" alt="https://www.ucl.ac.uk/prospective-students/graduate/images/test/placeholder-200x200">
                        <h3> name </h3>
                        <p> about me information and data that describes why the match is a good match</p>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <p>Control Panel</p>
                <p><a href="#" id="clear">Clear Table</a> | <a href="/api/tables">API Table Link</a> | <a href="/api/waitlist">API Wait List</a> | <a href="https://github.com/afhaque/HotRestaurant">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
    <script>
    // function Profile(name, imageUrl, leisureAvg, moralsAvg, interestsAvg, superficialityAvg, multiplyer, reducer) {
    //     this.name = name;
    //     this.imageUrl = imageUrl;
    //     this.leisureAvg = leisureAvg;
    //     this.moralsAvg = moralsAvg;
    //     this.interestsAvg = interestsAvg;
    //     this.superficialityAvg = superficialityAvg;
    //     this.multiplyer = multiplyer;
    //     this.reducer = reducer;
    // }

    // var categoryArray = ["leisure", "morals", "interests", "superficiality"];
 

    var userDataObj;
    $.ajax({
            url: "/api/friends",
            method: "GET"
        })
        .done(function(data) {
            
            dataArray.push(data);
            extractUserProfile();
          
            function extractUserProfile() {
                for (var i = 0; i < n; i ++){

                }
            

            }
        });

    function getMatchScores() {

        var n = dataArray[0].length - 1;

        console.log(n);
        userDataObj = dataArray[0][n];
        console.log(userDataObj);
        var tempUserAverage;

        for (var i = 0; i < n; i++) {
            for (var j = 0; j < 4; j++) {
                var maximizer = 1;
                var minimizer = 1;
                switch (true) {
                    case (userDataObj.multiplyer === "leisure" && j === 0):
                        maximizer = 2;
                        break;
                    case (userDataObj.multiplyer === "morals" && j === 1):
                        maximizer = 2;
                        console.log("moralsfire");
                        break;
                    case (userDataObj.multiplyer === "interests" && j === 2):
                        maximizer = 2;
                        console.log("interestsfire");
                        break;
                    case (userDataObj.multiplyer === "superficiality" && j === 3):
                        maximizer = 2;
                        console.log("superficialityfire");
                        break;
                    default:
                        console.log("missedit")
                        break;
                }
                switch (true) {
                    case (userDataObj.reducer === "leisure" && j === 0):
                        minimizer = 0.5;
                        console.log("leisurefire");
                        break;
                    case (userDataObj.reducer === "morals" && j === 1):
                        minimizer = 0.5;
                        console.log("moralsfire");
                        break;
                    case (userDataObj.reducer === "interests" && j === 2):
                        minimizer = 0.5;
                        console.log("interestsfire");
                        break;
                    case (userDataObj.reducer === "superficiality" && j === 3):
                        minimizer = 0.5;
                        console.log("superficialityfire");
                        break;
                    default:
                        console.log("missedit");
                        break;
                }
                var num = (Math.abs((dataArray[0][i].surveyResults[j].average) - (userDataObj.surveyResults[j].average)));

                var twoNum = num.toFixed(2);
                var scaled = 0;
                switch (true) {
                    case (twoNum < 1):
                        scaled = 10 * minimizer * maximizer;
                        break;
                    case (twoNum >= 1 && twoNum < 2):
                        scaled = 8 * minimizer * maximizer;
                        break;
                    case (twoNum >= 2 && twoNum < 3):
                        scaled = 6 * minimizer * maximizer;
                        break;
                    case (twoNum >= 3 && twoNum < 4):
                        scaled = 5 * minimizer * maximizer;
                        break;
                    case (twoNum >= 4 && twoNum < 5):
                        scaled = 4 * minimizer * maximizer;
                        break;
                    case (twoNum >= 5 && twoNum < 6):
                        scaled = 2 * minimizer * maximizer;
                        break;
                    case (twoNum >= 6):
                        scaled = 0;
                        break;
                }

                tempCompareArray.push(scaled);
            }
            console.log(tempCompareArray);
        }
        setTimeout(parseMatchScores, 2000);
    }

    function parseMatchScores() {
        var n = tempCompareArray.length;
        var partial = 0;
        var counter = 0;
        for (var i = 0; i < n; i++) {
            partial += tempCompareArray[i];
            counter++;
            if (counter === 4) {
                parsedArray.push(partial);
                partial = 0;
                counter = 0;
            }

        }
        setTimeout(function() {
            console.log(parsedArray);
            findMax();
        }, 2000);
    }


    function findMax() {
        var n = parsedArray.length;
        var currentVal;
        var spliceCounter = 0;
        var tempCompareArray = [];
        var splicedArray = [];
        var tempArray = [];

        do {
            tempCompareArray = [];
            tempArray = parsedArray;
            var splicedVal = tempArray[spliceCounter];
             splicedArray = tempArray.splice(spliceCounter, 1);
            compareIt(splicedVal);

            function compareIt(val) {
                var l = tempCompareArray.length;
                for (var k = 0; k < l; k++) {
                    if (splicedVal >= splicedArray[k]) {
                        tempCompareArray.push(true);
                    } else {
                        tempCompareArray.push(false);
                    }
                }
                for (var j = 0; j < l; j++) {
                    if (tempCompareArray[j] === false) {
                        boolArray.push(false);
                        break;
                    }
                    if (tempCompareArray[l - 1] === true) {
                        boolArray.push(true);
                        break;
                    }
                }
            }
            spliceCounter++;

        } while (spliceCounter < n);
        setTimeout(function() {
            console.log(boolArray);
        }, 2500);
    }
    </script>
</body>

</html>
