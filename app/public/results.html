<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tables Page</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <style>
    .matchResult {
        border: solid 2px black;
        height: 200px;
        width: 200px;
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <!-- Current Tables in Use -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">You</h4>
                    </div>
                    <div class="panel-body" id="you">
                        <img class="matchResult" id="yourImage" alt="https://www.ucl.ac.uk/prospective-students/graduate/images/test/placeholder-200x200">
                        <h3> name </h3>
                        <p> about me information and data that describes why the match is a good match</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <!-- Current Tables in Use -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Your match</h4>
                    </div>
                    <div class="panel-body">
                        <img class="matchResult" id="yourMatch" alt="https://www.ucl.ac.uk/prospective-students/graduate/images/test/placeholder-200x200">
                        <h3> name </h3>
                        <p> about me information and data that describes why the match is a good match</p>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <p>Control Panel</p>
                <p><a href="#" id="clear">Clear Table</a> | <a href="/api/tables">API Table Link</a> | <a href="/api/waitlist">API Wait List</a> | <a href="https://github.com/afhaque/HotRestaurant">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
    <script>

    var finalMatchScore;
    var categoryArray = ["leisure", "morals", "interests", "superficiality"];
    var dataArray = [];
    var insertImage;
    $.ajax({
            url: "/api/friends",
            method: "GET"
        })
        .done(function(data) {
            insertImage = data[1].imageUrl;
            console.log(insertImage);
            $("#yourMatch").attr("src", insertImage);
            dataArray.push(data);
            getAverages();
            // calculates the average scores of a user in each category and updates the dataArray accordingly
            function getAverages() {
                var categorySumArray = [];
                var n = data.length;
                var m = 3; // raw data length
                var categorySumArray = [];
                for (var i = 0; i < n; i++) {
                    for (var j = 0; j < 4; j++) {
                        var categorySum = 0;
                        for (var k = 0; k < m; k++) {
                            categorySum += data[i].surveyResults[j].raw[k];
                        }
                        dataArray[0][i].surveyResults[j].average = (categorySum / m).toFixed(2);
                        categorySumArray.push(categorySum);

                    }
                    console.log(categorySumArray);
                }
                console.log(dataArray);
            }
        });

    //   var insertImage = friends[0].imageUrl;
    // console.log(insertImage); 
    // $("#yourMatch").attr("src", insertImage); 
    // var trait = friends[0].averageTraits(); 
    // console.log(trait);
    </script>
</body>

</html>
